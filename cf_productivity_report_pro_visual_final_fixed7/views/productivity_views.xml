
<odoo>
  <data>
    <!-- MenÃº principal -->
    <menuitem id="menu_cf_productivity_root" name="ðŸ“Š Productividad" sequence="10"/>
    <menuitem id="menu_cf_productivity_report" name="ðŸ§¾ Informe de productividad" parent="menu_cf_productivity_root" sequence="10"/>

    <!-- Action window -->
    <record id="action_cf_productivity_report" model="ir.actions.act_window">
      <field name="name">Informe de productividad</field>
      <field name="res_model">cf.productivity.report</field>
      <field name="view_mode">tree,graph,pivot,form,kanban</field>
      <field name="context">{'search_default_group_by_user': 1}</field>
    </record>

    <menuitem id="menu_cf_productivity_report_action" parent="menu_cf_productivity_report" action="action_cf_productivity_report" sequence="10"/>

    <!-- Tree view -->
    <record id="view_cf_productivity_report_tree" model="ir.ui.view">
      <field name="name">cf.productivity.report.tree</field>
      <field name="model">cf.productivity.report</field>
      <field name="arch" type="xml">
        <tree string="Informe de Productividad" create="1" edit="0"
          decoration-success="time_since_previous_sec and time_since_previous_sec &lt; 60"
          decoration-warning="time_since_previous_sec and time_since_previous_sec &gt;= 60 and time_since_previous_sec &lt; 300"
          decoration-danger="time_since_previous_sec and time_since_previous_sec &gt;= 300"
          decoration-muted="is_pause">

          <field name="date"/>
          <field name="user_id"/>
          <field name="action_type"/>
          <field name="reason"/>
<field name="time_since_previous" readonly="1"/>
          <field name="time_since_previous_sec" invisible="1"/>
          <field name="is_pause"/>
          <field name="avg_time_today" readonly="1"/>
          <field name="model"/>
          <field name="res_id"/>
          <field name="note"/>
        </tree>
      </field>
    </record>

    <!-- Form view -->
    <record id="view_cf_productivity_report_form" model="ir.ui.view">
      <field name="name">cf.productivity.report.form</field>
      <field name="model">cf.productivity.report</field>
      <field name="arch" type="xml">
        <form string="LÃ­nea de productividad">
          <sheet>
            <group>
              <field name="date"/>
              <field name="user_id"/>
              <field name="action_type"/>
              <field name="reason"/>
              <field name="time_since_previous" readonly="1"/>
          <field name="time_since_previous_sec" invisible="1"/>
              <field name="is_pause" readonly="1"/>
              <field name="avg_time_today" readonly="1"/>
              <field name="model"/>
              <field name="res_id"/>
            </group>
            <notebook>
              <page string="Notas">
                <field name="note" nolabel="1"/>
              </page>
            </notebook>
          </sheet>
          <chatter/>
        </form>
      </field>
    </record>

    <!-- Graph & Pivot defaults -->
    <record id="view_cf_productivity_report_graph" model="ir.ui.view">
      <field name="name">cf.productivity.report.graph</field>
      <field name="model">cf.productivity.report</field>
      <field name="arch" type="xml">
        <graph string="Acciones por usuario" type="bar">
          <field name="user_id" type="row"/>
          <field name="date" type="col"/>
          <field name="id" type="measure"/>
        </graph>
      </field>
    </record>

    <record id="view_cf_productivity_report_pivot" model="ir.ui.view">
      <field name="name">cf.productivity.report.pivot</field>
      <field name="model">cf.productivity.report</field>
      <field name="arch" type="xml">
        <pivot string="KPIs de productividad">
          <field name="user_id" type="row"/>
          <field name="action_type" type="col"/>
          <field name="id" type="measure" string="Acciones" />
        </pivot>
      </field>
    </record>

  </data>
</odoo>
