<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <record id="view_stock_lot_form_cfon_alert" model="ir.ui.view">
    <field name="name">stock.lot.form.cfon.return.alert.v11</field>
    <field name="model">stock.lot</field>
    <field name="inherit_id" ref="stock.view_stock_lot_form"/>
    <field name="arch" type="xml">
      <!-- Add a small stats box in the header area if possible -->
      <xpath expr="//sheet" position="inside">
        <group attrs="{'invisible': [('x_return_count','=',0)]}">
          <group>
            <field name="x_return_count" readonly="1"/>
            <field name="x_on_hand_qty" readonly="1"/>
            <field name="x_return_alert" readonly="1"/>
          </group>
          <separator string="Devoluciones"/>
          <label string="Se marca alerta cuando el número de devoluciones es 2 o más."/>
        </group>
      </xpath>
    </field>
  </record>

  <!-- Action & Menu -->
  <record id="action_lots_2plus_returns" model="ir.actions.act_window">
    <field name="name">SN/Lotes +2 devoluciones en stock</field>
    <field name="res_model">stock.lot</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">[('x_return_count','>=',2), ('x_on_hand_qty','&gt;',0)]</field>
  </record>

  <menuitem id="menu_lots_2plus_returns"
            name="SN/Lotes en stock +2 dev"
            parent="stock.menu_traceability"
            action="action_lots_2plus_returns"
            sequence="25"/>
</odoo>
