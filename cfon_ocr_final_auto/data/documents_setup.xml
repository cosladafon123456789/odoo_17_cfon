<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!-- Carpeta en Documentos -->
  <record id="folder_vendor_bills_ocr_pro" model="documents.folder">
    <field name="name">Facturas Proveedor (OCR Gratis)</field>
  </record>

  <!-- Acción servidor (opcional, se mantiene por si quieres ejecutarla manualmente) -->
  <record id="action_ocr_process_document_pro" model="ir.actions.server">
    <field name="name">Procesar por OCR (Gratis Pro)</field>
    <field name="model_id" ref="documents.model_documents_document"/>
    <field name="state">code</field>
    <field name="code">
for doc in records:
    env['invoice.ocr.engine'].process_document(doc)
    </field>
  </record>

  <!-- CRON: procesa automáticamente nuevos documentos en la carpeta -->
  <record id="ir_cron_cfon_ocr_auto" model="ir.cron">
    <field name="name">CFON OCR - Auto procesar documentos</field>
    <field name="model_id" ref="base.model_ir_actions_server"/>
    <field name="state">code</field>
    <field name="code">env['invoice.ocr.engine'].cron_process_invoices_folder()</field>
    <field name="interval_number">1</field>
    <field name="interval_type">minutes</field>
    <field name="numbercall">-1</field>
    <field name="active">True</field>
  </record>
</odoo>
