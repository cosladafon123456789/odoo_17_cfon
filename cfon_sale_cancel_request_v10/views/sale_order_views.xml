<odoo>
  <record id="view_order_form_inherit_cfon_cancel" model="ir.ui.view">
    <field name="name">sale.order.form.cfon.cancel</field>
    <field name="model">sale.order</field>
    <field name="inherit_id" ref="sale.view_order_form"/>
    <field name="priority" eval="5"/>
    <field name="arch" type="xml">
      <xpath expr="//header//button[@name='action_cancel']" position="attributes">
        <attribute name="groups">sales_team.group_sale_manager</attribute>
      </xpath>
      <xpath expr="//header" position="inside">
        <field name="cancel_request" invisible="1"/>
        <field name="cancel_reason" invisible="1"/>
        <button name="action_request_cancel" type="object"
                string="Solicitar cancelación"
                class="btn-secondary"
                groups="sales_team.group_sale_salesman,sales_team.group_sale_salesman_all_leads"
                modifiers='{"invisible": [["state","in",["draft","cancel"]], ["cancel_request","=", true]]}'/>
      </xpath>
      <xpath expr="//sheet" position="before">
        <widget name="web_ribbon" title="Solicitud de cancelación"
                bg_color="bg-danger"
                modifiers='{"invisible": [["cancel_request","=", false]]}'/>
      </xpath>
    </field>
  </record>

  <record id="sale_order_search_inherit_cfon_cancel" model="ir.ui.view">
    <field name="name">sale.order.search.cfon.cancel</field>
    <field name="model">sale.order</field>
    <field name="inherit_id" ref="sale.view_sales_order_filter"/>
    <field name="arch" type="xml">
      <xpath expr="//search" position="inside">
        <filter name="cancel_req" string="Con solicitud de cancelación"
                domain="[('cancel_request','=',True)]"/>
      </xpath>
    </field>
  </record>
</odoo>